import java.util.*;
import java.lang.*;
import java.io.*;


public class creaDatos{
    public static void main(String args[]){
        /////Inicialización/////
        double Vo = 90;
        double So = 2036;
        double tMuestra = 0.1;
        double y_coords[] = {-3.583129,-3.582925,-3.582407,-3.582069,-3.581905,-3.582061,-3.582726,-3.583209,-3.583665,-3.584381,-3.584577,-3.584306,-3.58426,-3.584558,-3.585113,-3.585518,-3.585856,-3.585859,-3.585854,-3.58605,-3.586849,-3.587997,-3.589094,-3.58992,-3.590293,-3.590836,-3.591541,-3.59203,-3.591601,-3.590818,-3.589402,-3.588726,-3.587798,-3.587133,-3.586291,-3.585578,-3.585621,-3.586088,-3.586898,-3.587826,-3.588443,-3.588341,-3.58759,-3.587064,-3.586249,-3.585648,-3.585251,-3.585011,-3.584824,-3.584624,-3.58449,-3.584293,-3.584116,-3.583897,-3.58365,-3.583411,-3.583296,-3.583129,-3.582925,-3.582407,-3.582069,-3.581905,-3.582061,-3.582726,-3.583209,-3.583665,-3.584381,-3.584577,-3.584306,-3.58426,-3.584558,-3.585113,-3.585518,-3.585856,-3.585859,-3.585854,-3.58605,-3.586849,-3.587997,-3.589094,-3.58992,-3.590293,-3.590836,-3.591541,-3.59203,-3.591601,-3.590818,-3.589402,-3.588726,-3.587798,-3.587133,-3.586291,-3.585578,-3.585621,-3.586088,-3.586898,-3.587826,-3.588443,-3.588341,-3.58759,-3.587064,-3.586249,-3.585648,-3.585251,-3.585011,-3.584824,-3.584624,-3.58449,-3.584293,-3.584116,-3.583897,-3.58365,-3.583411,-3.583296,-3.58313,
            -3.583129,-3.582925,-3.582407,-3.582069,-3.581905,-3.582061,-3.582726,-3.583209,-3.583665,-3.584381,-3.584577,-3.584306,-3.58426,-3.584558,-3.585113,-3.585518,-3.585856,-3.585859,-3.585854,-3.58605,-3.586849,-3.587997,-3.589094,-3.58992,-3.590293,-3.590836,-3.591541,-3.59203,-3.591601,-3.590818,-3.589402,-3.588726,-3.587798,-3.587133,-3.586291,-3.585578,-3.585621,-3.586088,-3.586898,-3.587826,-3.588443,-3.588341,-3.58759,-3.587064,-3.586249,-3.585648,-3.585251,-3.585011,-3.584824,-3.584624,-3.58449,-3.584293,-3.584116,-3.583897,-3.58365,-3.583411,-3.583296,-3.583129,-3.582925,-3.582407,-3.582069,-3.581905,-3.582061,-3.582726,-3.583209,-3.583665,-3.584381,-3.584577,-3.584306,-3.58426,-3.584558,-3.585113,-3.585518,-3.585856,-3.585859,-3.585854,-3.58605,-3.586849,-3.587997,-3.589094,-3.58992,-3.590293,-3.590836,-3.591541,-3.59203,-3.591601,-3.590818,-3.589402,-3.588726,-3.587798,-3.587133,-3.586291,-3.585578,-3.585621,-3.586088,-3.586898,-3.587826,-3.588443,-3.588341,-3.58759,-3.587064,-3.586249,-3.585648,-3.585251,-3.585011,-3.584824,-3.584624,-3.58449,-3.584293,-3.584116,-3.583897,-3.58365,-3.583411,-3.583296,-3.58313,-3.583129,-3.582925,-3.582407,-3.582069,-3.581905,-3.582061,-3.582726,-3.583209,-3.583665,-3.584381,-3.584577,-3.584306,-3.58426,-3.584558,-3.585113,-3.585518,-3.585856,-3.585859,-3.585854,-3.58605,-3.586849,-3.587997,-3.589094,-3.58992,-3.590293,-3.590836,-3.591541,-3.59203,-3.591601,-3.590818,-3.589402,-3.588726,-3.587798,-3.587133,-3.586291,-3.585578,-3.585621,-3.586088,-3.586898,-3.587826,-3.588443,-3.588341,-3.58759,-3.587064,-3.586249,-3.585648,-3.585251,-3.585011,-3.584824,-3.584624,-3.58449,-3.584293,-3.584116,-3.583897,-3.58365,-3.583411,-3.583296,-3.583129,-3.582925,-3.582407,-3.582069,-3.581905,-3.582061,-3.582726,-3.583209,-3.583665,-3.584381,-3.584577,-3.584306,-3.58426,-3.584558,-3.585113,-3.585518,-3.585856,-3.585859,-3.585854,-3.58605,-3.586849,-3.587997,-3.589094,-3.58992,-3.590293,-3.590836,-3.591541,-3.59203,-3.591601,-3.590818,-3.589402,-3.588726,-3.587798,-3.587133,-3.586291,-3.585578,-3.585621,-3.586088,-3.586898,-3.587826,-3.588443,-3.588341,-3.58759,-3.587064,-3.586249,-3.585648,-3.585251,-3.585011,-3.584824,-3.584624,-3.58449,-3.584293,-3.584116,-3.583897,-3.58365,-3.583411,-3.583296,-3.58313};
        double x_coords[] = {40.614537,40.61405,40.612948,40.612278,40.611969,40.611653,40.611789,40.612227,40.61263,40.613247,40.613858,40.614715,40.615167,40.61546,40.615197,40.614621,40.614951,40.615379,40.616122,40.616621,40.617034,40.617429,40.617822,40.618188,40.618632,40.619235,40.619641,40.620077,40.62048,40.62039,40.619567,40.618854,40.618109,40.618011,40.617978,40.617964,40.618339,40.618746,40.619043,40.619401,40.619853,40.620244,40.62026,40.620195,40.620065,40.619951,40.619454,40.619019,40.618626,40.618095,40.617737,40.617311,40.616867,40.616328,40.615766,40.615228,40.614951,40.614537,40.61405,40.612948,40.612278,40.611969,40.611653,40.611789,40.612227,40.61263,40.613247,40.613858,40.614715,40.615167,40.61546,40.615197,40.614621,40.614951,40.615379,40.616122,40.616621,40.617034,40.617429,40.617822,40.618188,40.618632,40.619235,40.619641,40.620077,40.62048,40.62039,40.619567,40.618854,40.618109,40.618011,40.617978,40.617964,40.618339,40.618746,40.619043,40.619401,40.619853,40.620244,40.62026,40.620195,40.620065,40.619951,40.619454,40.619019,40.618626,40.618095,40.617737,40.617311,40.616867,40.616328,40.615766,40.615228,40.614951,40.614536,
            40.614537,40.61405,40.612948,40.612278,40.611969,40.611653,40.611789,40.612227,40.61263,40.613247,40.613858,40.614715,40.615167,40.61546,40.615197,40.614621,40.614951,40.615379,40.616122,40.616621,40.617034,40.617429,40.617822,40.618188,40.618632,40.619235,40.619641,40.620077,40.62048,40.62039,40.619567,40.618854,40.618109,40.618011,40.617978,40.617964,40.618339,40.618746,40.619043,40.619401,40.619853,40.620244,40.62026,40.620195,40.620065,40.619951,40.619454,40.619019,40.618626,40.618095,40.617737,40.617311,40.616867,40.616328,40.615766,40.615228,40.614951,40.614537,40.61405,40.612948,40.612278,40.611969,40.611653,40.611789,40.612227,40.61263,40.613247,40.613858,40.614715,40.615167,40.61546,40.615197,40.614621,40.614951,40.615379,40.616122,40.616621,40.617034,40.617429,40.617822,40.618188,40.618632,40.619235,40.619641,40.620077,40.62048,40.62039,40.619567,40.618854,40.618109,40.618011,40.617978,40.617964,40.618339,40.618746,40.619043,40.619401,40.619853,40.620244,40.62026,40.620195,40.620065,40.619951,40.619454,40.619019,40.618626,40.618095,40.617737,40.617311,40.616867,40.616328,40.615766,40.615228,40.614951,40.614536,40.614537,40.61405,40.612948,40.612278,40.611969,40.611653,40.611789,40.612227,40.61263,40.613247,40.613858,40.614715,40.615167,40.61546,40.615197,40.614621,40.614951,40.615379,40.616122,40.616621,40.617034,40.617429,40.617822,40.618188,40.618632,40.619235,40.619641,40.620077,40.62048,40.62039,40.619567,40.618854,40.618109,40.618011,40.617978,40.617964,40.618339,40.618746,40.619043,40.619401,40.619853,40.620244,40.62026,40.620195,40.620065,40.619951,40.619454,40.619019,40.618626,40.618095,40.617737,40.617311,40.616867,40.616328,40.615766,40.615228,40.614951,40.614537,40.61405,40.612948,40.612278,40.611969,40.611653,40.611789,40.612227,40.61263,40.613247,40.613858,40.614715,40.615167,40.61546,40.615197,40.614621,40.614951,40.615379,40.616122,40.616621,40.617034,40.617429,40.617822,40.618188,40.618632,40.619235,40.619641,40.620077,40.62048,40.62039,40.619567,40.618854,40.618109,40.618011,40.617978,40.617964,40.618339,40.618746,40.619043,40.619401,40.619853,40.620244,40.62026,40.620195,40.620065,40.619951,40.619454,40.619019,40.618626,40.618095,40.617737,40.617311,40.616867,40.616328,40.615766,40.615228,40.614951,40.614536};
        /////Entrada/////
        double porFrenada[] =  {0,0,0,0,0,0,0,0,0,0,/*10*/
                                0,0,0,0,0,0,0,0,0,0,/*20*/
                                0,0,0,0,0,0,0,0,0,0,/*30*/
                                0,0,0,0,0,0,0,0,0,0,/*40*/
                                0,0,0,0,0,0,0,0,0,0,/*50*/
                                0,0,0,0,0,0,0,0,0,0,/*60*/
                                0,0,0,0,0,0,0,0,0,0,/*70*/
                                0,0,0,0,0,0,0,0,0,0,/*80*/
                                0,0,0,0,0,0,0,0,0,0,/*90*/
                                0,0,0,0,0,0,0,0,0,0,/*100*/
                                0.02,0.28,0.739,0.97,1,1,1,1,1,1,/*110*/
                                1,1,1,1,1,1,1,1,1,1,/*120*/
                                1,1,1,1,1,0.89,0.9,0.674,0.735,0.632,/*130*/
                                0.329,0.144,0,0,0,0,0,0.62,0.741,0.762,/*140*/
                                0.41,0.172,0.207,0,0,0,0,0,0.26,0.34,/*150*/
                                0.307,0.284,0.274,0.295,0.39,0.28,0.04,0,0,0,/*160*/
                                0,0,0,0,0,0,0,0,0,0,/*170*/
                                0,0,0,0,0,0,0,0,0,0,/*180*/
                                0,0,0,0,0,0,0,0,0,0,/*190*/
                                0,0,0,0,0,0,0,0,0,0,/*200*/
                                0,0,0,0,0,0,0,0,0,0,/*210*/
                                0,0,0,0,0,0,0,0,0,0,/*220*/
                                0,0,0,0,0,0,0,0,0,0,/*230*/
                                0.13,0.24,0.48,0.89,1,1,1,1,1,1,/*240*/
                                0.93,0.74,0.58,0.39,0.17,0.074,0.06,0,0,0,/*250*/
                                0,0,0,0,0,0,0,0,0,0,/*260*/
                                0,0,0,0,0,0,0,0,0,0,/*270*/
                                0,0,0,0,0,0,0,0,0,0,/*280*/
                                0,0,0,0,0,0,0,0,0,0,/*290*/
                                0,0,0,0,0,0,0,0,0,0/*300*/};

        double porAceleracion[] =  {1,1,1,1,1,1,1,1,1,1,/*10*/
                                    1,1,1,1,1,1,1,1,1,1,/*20*/
                                    1,1,1,1,1,1,1,1,1,1,/*30*/
                                    1,1,1,1,1,1,1,1,1,1,/*40*/
                                    1,1,1,1,1,1,1,1,1,1,/*50*/
                                    1,1,1,1,1,1,1,1,1,1,/*60*/
                                    1,1,1,1,1,1,1,1,1,1,/*70*/
                                    1,1,1,1,1,1,1,1,1,1,/*80*/
                                    1,1,1,1,1,1,1,1,1,1,/*90*/
                                    1,1,1,1,1,1,1,1,1,1,/*100*/
                                    0.398,0.09,0,0,0,0,0,0,0,0,/*110*/
                                    0,0,0,0,0,0,0,0,0,0,/*120*/
                                    0,0,0,0,0,0,0,0,0,0.127,/*130*/
                                    0.227,0.478,0.94,1,1,1,1,0.24,0,0,/*140*/
                                    0,0,0.45,0.68,0.53,0.38,0.417,0.254,0.195,0.127,/*150*/
                                    0.098,0.09,0.38,0.21,0.34,0.67,0.98,1,1,1,/*160*/
                                    1,1,1,1,1,1,1,1,1,1,/*170*/
                                    1,1,1,1,1,1,1,1,1,1,/*180*/
                                    1,1,1,1,1,1,1,1,1,1,/*190*/
                                    1,1,1,1,1,1,1,1,1,1,/*200*/
                                    1,1,1,1,1,1,1,1,1,1,/*210*/
                                    1,1,1,1,1,1,1,1,1,1,/*220*/
                                    1,1,1,1,1,1,1,1,1,1,/*230*/
                                    0.73,0.21,0,0,0,0,0,0,0,0,/*240*/
                                    0,0,0,0.37,0.84,1,1,1,1,1,/*250*/
                                    1,1,1,1,1,1,1,1,1,1,/*260*/
                                    1,1,1,1,1,1,1,1,1,1,/*270*/
                                    1,1,1,1,1,1,1,1,1,1,/*280*/
                                    1,1,1,1,1,1,1,1,1,1,/*290*/
                                    1,1,1,1,1,1,1,1,1,1/*300*/};
        /////Salida/////
        double rpm[] = new double[(porAceleracion.length)];
        double marcha[] = new double[(porAceleracion.length)];
        double velocidad[] = new double[(porAceleracion.length)];
        double metros[] = new double[(porAceleracion.length)];
        int xtime[] = new int[(porAceleracion.length)];
        double comb[] = new double[(porAceleracion.length)];

        /////Proceso de creación de datos/////
        for(int i =0; i < (porAceleracion.length); i++){
            /////inicialización de tamaño/////
            // rpm = new double[(porAceleracion.length)];
            // velocidad = new double[(porAceleracion.length)];
            // metros = new double[(porAceleracion.length)];
            // marcha = new double[(porAceleracion.length)];

            /////variables auxiliares/////
            double V;
            double porA;
            double porF;
            double increA;
            double increF; 

            /////llamada de los métodos/////
            porA = porAceleracion[i];
            increA = acelera(Vo, porA, tMuestra);

            porF = porFrenada[i];
            increF = frenada(Vo, porF, tMuestra);

            velocidad[i] = Vo + increA + increF;

            marcha[i] = transmision(velocidad[i], i);
            rpm[i] = revolucion(velocidad[i], i);
            if(i==0){
                xtime[i] = xtime(-1);
                comb[i] = comb(100.5);
            }else{ 
                xtime[i] = xtime(xtime[i-1]);
                comb[i] = comb(comb[i-1]);
            }
           

            metros[i] = GPS(Vo, velocidad[i], So, tMuestra);

            Vo = velocidad[i];
            So = metros[i];

        }
        
        /////Escritura en archivo.csv/////
        PrintWriter pw;
        try{
            pw = new PrintWriter(new File("datosJava.csv"));

            StringBuffer csvHeader = new StringBuffer("");
            StringBuffer csvData = new StringBuffer("");
            csvHeader.append("xlength,vel,fren,rpm,marcha,comb,xtime,x_cord,y_cord\n");

            // write header
            pw.write(csvHeader.toString());

            // write data
            for(int i = 0; (i < porAceleracion.length); i++){
                csvData.append(Double.toString(metros[i]));
                csvData.append(',');
                csvData.append(Double.toString(velocidad[i]));
                csvData.append(',');
                csvData.append(Double.toString(porFrenada[i]));
                csvData.append(',');
                csvData.append(Double.toString(rpm[i]));
                csvData.append(',');
                csvData.append(Double.toString(marcha[i]));
                csvData.append(',');
                csvData.append(Integer.toString(xtime[i]));
                csvData.append(',');
                csvData.append(Double.toString(comb[i]));
                csvData.append(',');
                csvData.append(Double.toString(x_coords[i]));
                csvData.append(','); 
                csvData.append(Double.toString(y_coords[i]));
                csvData.append('\n');
                
            }
            pw.write(csvData.toString());
            pw.close();
            
        }catch(Exception e){
            System.out.println("Se ha producido el error: " + e);
        }




    }
/////Métodos que modelizan cosas/////

    public static double acelera(double Vant, double porA, double tMuestra){
        double divi = (208*208)/(Vant*Vant);
        double numero = 360.058258278995/(divi - 1);
        double inst = Math.sqrt(numero);
        inst += tMuestra;

        double V = 208*(inst/(Math.sqrt((inst*inst) + 360.058258278995)));

        double incre = (porA/1)*(V-Vant);

        return incre;
    }
    
    public static double frenada(double Vant, double porF, double tMuestra){
        double multi = 26.82458782989084 * 4.8463;
        double inst = (Vant - 130 + multi) / 26.82458782989084;
        inst -= tMuestra;

        double VF = 130 + 26.82458782989084*(inst - 4.8463);
        double incre = (porF/1)*(VF - Vant);

        return incre;
    }

    public static double transmision (double V, int j){
        double trans = 0;
        if(V <= 50.4){
            trans = 1;
        }else if((V > 50.4) && (V <= 80.03)) {
            trans = 2;
        }else if((V > 80.03) && (V <= 113.8)){
            trans = 3;
        }else if((V > 113.8) && (V <= 153.6)){
            trans = 4;
        }else if((V > 153.6) && (V <= 242)){
            trans = 5;
        }
        return trans;
    }

    public static double revolucion(double V, int j){
        double revol = 0;
        if(V <= 50.4){
            revol = 7000 + (111.11)*(V - 63);
        }else if((V > 50.4) && (V <= 80.03)) {
            revol = 7000 + (70)*(V - 100);
        }else if((V > 80.03) && (V <= 113.8)){
            revol = 7000 + (47.9452)*(V - 143);
        }else if((V > 113.8) && (V <= 153.6)){
            revol = 7000 + (36.458)*(V - 192);
        }else if((V > 153.6) && (V <= 242)){
            revol = 7000 + (28.9256)*(V - 242);
        }
        return revol;
    }

    public static double GPS (double Vant, double V,double Sant, double tMuestra){
        V = V*0.277777778;
        Vant = Vant*0.277777778;
        double incre = (V - Vant);
        double s = Sant + Vant*tMuestra + incre/2;
        return s;
    }

    public static int xtime(int xtime){
        return xtime +1;
    }

    public static double comb (double combustible){
        return combustible - 0.5;
    }
}

// String archCSV = "datos.csv";
            // CSVWriter csvWriter = new csvWriter(new FileWriter(archCSV));

            // List<double[]> trama = new ArrayList<double[]>();
            // for(int i = 0; (i < porAceleracion.length); i++){
            //     double[] aux = {metros[i], rpm[i], velocidad[i], marcha[i], porFrenada[i]};
            //     trama.add(aux);
            // }

            // writer.writeAll(trama);
